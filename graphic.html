<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Eduardo Chavez – Graphic Design</title>
  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/images/whitelogo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/images/whitelogo.png">
  <link rel="apple-touch-icon" href="assets/images/whitelogo.png">
  <link rel="shortcut icon" href="assets/images/whitelogo.png">
  <meta name="theme-color" content="#0b1220">
  <link rel="stylesheet" href="styles.css?v=20260105_3" />
  <style>
    /* Basic Graphic Design page (intentionally simple; ready to expand) */
    .gd-page{padding:42px 20px 64px}
    .gd-inner{max-width:1200px;margin:0 auto}

    /* Hero with parallax video background */
    .gd-hero{
      position:relative;
      overflow:hidden;
      /* Full-bleed (edge-to-edge) */
      width: 100vw;
      margin-left: calc(50% - 50vw);
      margin-right: calc(50% - 50vw);
      border-radius:0;
      /* Taller hero to reveal more of the video */
      min-height: min(660px, 78vh);
      display:flex;
      align-items:flex-end;
      padding:0;
      isolation:isolate;
    }
    .gd-hero-media{
      position:absolute;
      /* Slightly less crop so more of the footage is visible */
      inset:-10% 0 -16% 0;
      pointer-events:none;
      z-index:0;
      transform:translate3d(0, var(--gd-hero-parallax, 0px), 0);
      will-change:transform;
    }
    .gd-hero-video{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform:scale(1.04);
      filter:grayscale(1);
    }
    .gd-hero-scrim{
      position:absolute;
      inset:0;
      /* Vignette: darken top + bottom edges for legibility */
      background:
        radial-gradient(1200px 680px at 50% 35%, rgba(0,0,0,0) 36%, rgba(0,0,0,.74) 100%),
        linear-gradient(to bottom, rgba(0,0,0,.90) 0%, rgba(0,0,0,0) 42%),
        linear-gradient(to top, rgba(0,0,0,.92) 0%, rgba(0,0,0,0) 52%);
      z-index:1;
      pointer-events:none;
    }
    /* Top intro copy (sits near the top of the hero, independent from headline/buttons) */
    .gd-hero-topcopy{
      position:absolute;
      top:clamp(12px, 2.6vh, 28px);
      left:0;
      right:0;
      z-index:2;
      pointer-events:none;
    }
    .gd-hero-topcopy .gd-hero-topcopy-inner{
      max-width:1200px;
      margin:0 auto;
      padding:0 20px;
    }
    /* Align with header logo gutter (.header .inner uses max-width:1200px and padding: 0 20px) */
    .gd-hero-content{position:relative;z-index:2;padding:22px 20px 28px;max-width:1200px;margin:0 auto;width:100%}
    .gd-hero h1{margin:0 0 10px 0;font-size:clamp(34px,5vw,56px);letter-spacing:-.02em;color:#fff;position:relative;display:inline-block}
    .gd-hero p{margin:0;color:rgba(255,255,255,.84);max-width:68ch;line-height:1.65;font-size:16px}
    .gd-hero .gd-hero-lead{font-size:clamp(18px,2.15vw,24px);line-height:1.5;color:rgba(255,255,255,.94);max-width:80ch;margin:0}

    /* Packaging-style yellow underline */
    .gd-hero .underline{
      position:relative;
      background-image: linear-gradient(0deg, rgba(255,228,77,1), rgba(255,228,77,1));
      background-position: 0 100%;
      background-repeat: no-repeat;
      background-size: 0% .11em;
      padding-bottom: .08em;
    }
    .gd-hero .underline::after{
      content:"";
      position:absolute;
      left:0;
      bottom:0;
      height:.12em;
      width:0;
      background:
        radial-gradient(40% 100% at 10% 50%, rgba(255,228,77,1) 0%, rgba(255,228,77,.6) 35%, rgba(255,228,77,0) 70%),
        linear-gradient(90deg, rgba(255,228,77,0) 0%, rgba(255,228,77,1) 50%, rgba(255,228,77,0) 100%);
      mix-blend-mode: screen;
      box-shadow: 0 0 12px rgba(255,228,77,.55), 0 0 24px rgba(255,228,77,.35);
      transform-origin: left center;
    }
    .gd-hero.loaded .underline{animation:underlineBG 540ms cubic-bezier(.18,.62,.22,1) forwards}
    .gd-hero.loaded .underline::after{animation:underlineZap 540ms cubic-bezier(.18,.62,.22,1) forwards, zapJitter 420ms ease-out 0s 1}

    .gd-hero .gd-actions a.ghost{border-color:rgba(255,255,255,.35);color:#fff}
    html.dark-mode .gd-hero .gd-actions a.ghost{border-color:rgba(255,255,255,.35)}

    @media (max-width: 720px){
      .gd-hero{min-height:min(560px, 68vh)}
      .gd-hero-content{padding:18px 20px 22px}
      .gd-hero-topcopy{top:12px}
    }

    @media (prefers-reduced-motion: reduce){
      .gd-hero-media{transform:none}
    }

    /* Break marquee between hero and work */
    .gd-break{
      margin:0;
      padding:18px 0;
      width: 100vw;
      margin-left: calc(50% - 50vw);
      margin-right: calc(50% - 50vw);
      overflow:hidden;
      position:relative;
      border-top:1px solid rgba(255,255,255,.10);
      border-bottom:1px solid rgba(255,255,255,.10);
      /* Solid band + upward shadow = clear separation from video */
      background:#0b0d10;
      box-shadow:
        0 -22px 42px rgba(0,0,0,.72),
        inset 0 1px 0 rgba(255,228,77,.42);
    }
    html:not(.dark-mode) .gd-break{
      border-top:1px solid rgba(0,0,0,.10);
      border-bottom:1px solid rgba(0,0,0,.10);
      background:#f1f1f1;
      box-shadow:
        0 -18px 30px rgba(0,0,0,.16),
        inset 0 1px 0 rgba(0,0,0,.08);
    }

    .gd-break::before,
    .gd-break::after{
      content:"";
      position:absolute;
      top:0;
      bottom:0;
      width:80px;
      z-index:2;
      pointer-events:none;
    }
    .gd-break::before{
      left:0;
      background:linear-gradient(to right, rgba(11,13,16,1), rgba(11,13,16,0));
    }
    .gd-break::after{
      right:0;
      background:linear-gradient(to left, rgba(11,13,16,1), rgba(11,13,16,0));
    }
    html:not(.dark-mode) .gd-break::before{
      background:linear-gradient(to right, rgba(241,241,241,1), rgba(241,241,241,0));
    }
    html:not(.dark-mode) .gd-break::after{
      background:linear-gradient(to left, rgba(241,241,241,1), rgba(241,241,241,0));
    }

    .gd-break-marquee{
      display:flex;
      width:max-content;
      will-change:transform;
      animation: gdBreakMarquee var(--gd-break-duration, 28s) linear infinite;
    }
    .gd-break-row{
      display:flex;
      align-items:center;
      white-space:nowrap;
      flex:0 0 auto;
    }
    .gd-break-item{
      font-size:clamp(28px, 6.2vw, 74px);
      letter-spacing:.08em;
      font-weight:300;
      text-transform:uppercase;
      color:rgba(255,255,255,.88);
    }
    .gd-break-sep{
      font-size:clamp(24px, 5.6vw, 62px);
      letter-spacing:.06em;
      font-weight:300;
      color:rgba(255,255,255,.34);
      margin:0 32px;
    }
    html:not(.dark-mode) .gd-break-item{color:rgba(0,0,0,.70)}
    html:not(.dark-mode) .gd-break-sep{color:rgba(0,0,0,.22)}

    @keyframes gdBreakMarquee{
      from{transform:translateX(0)}
      to{transform:translateX(-50%)}
    }

    @media (prefers-reduced-motion: reduce){
      .gd-break-marquee{animation:none}
    }

    .gd-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:18px}
    .gd-actions a{display:inline-flex;align-items:center;justify-content:center;text-decoration:none;border-radius:12px;padding:10px 14px;font-weight:800}
    .gd-actions a.primary{background:var(--accent);color:#000}
    .gd-actions a.ghost{border:1px solid rgba(0,0,0,.15);color:var(--text);background:transparent}
    html.dark-mode .gd-actions a.ghost{border-color:rgba(255,255,255,.18)}

    .gd-section{padding:22px 0}
    .gd-section h2{margin:0 0 10px 0;font-size:22px}
    .gd-section p{margin:0;color:var(--muted);line-height:1.6}

    /* Work scroller (inspired by willpaterson.design) */
    .gd-work{padding:72px 0;min-height:82vh}
    .gd-work-head{display:flex;align-items:flex-end;justify-content:space-between;gap:16px;margin-bottom:12px}
    .gd-work-head h2{margin:0;font-size:22px}
    .gd-work-head .hint{margin:0;color:var(--muted);font-size:13px;white-space:nowrap}
    .gd-work-head .hint kbd{font:inherit;border:1px solid rgba(0,0,0,.14);border-radius:8px;padding:2px 8px;background:rgba(0,0,0,.03)}
    html.dark-mode .gd-work-head .hint kbd{border-color:rgba(255,255,255,.18);background:rgba(255,255,255,.06)}

    .gd-rail{
      /* No manual left/right scrolling; marquee runs on its own */
      overflow-x:hidden;
      /* Let the 3D plane breathe vertically */
      overflow-y:visible;
      padding:110px 0 110px;
      /* Full-bleed (edge-to-edge) like the reference */
      width: 100vw;
      margin-left: calc(50% - 50vw);
      margin-right: calc(50% - 50vw);
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
      touch-action: pan-y;
      overscroll-behavior-x: none;
      perspective: 1600px;
      perspective-origin: right center;
      transform-style: preserve-3d;
    }
    .gd-rail::-webkit-scrollbar{display:none}
    .gd-rail:focus{outline:none}
    .gd-rail:focus-visible{outline:2px solid rgba(255,228,77,.8);outline-offset:6px;border-radius:14px}

    /* 3D plane that creates the uniform taper (reference-style) */
    .gd-rail-plane{
      display:inline-block;
      transform-style: preserve-3d;
      transform-origin: right center;
      /* These angles are the "look" — adjust here if needed */
      transform: translateY(60px) rotateX(4deg) rotateY(12deg) rotateZ(1deg);
    }

    /* Fullscreen/desktop: drop the plane a bit more */
    @media (min-width: 1024px){
      .gd-rail-plane{transform: translateY(84px) rotateX(4deg) rotateY(12deg) rotateZ(1deg)}
    }

    /* Marquee track (moves continuously) */
    .gd-rail-track{
      display:flex;
      gap:6px;
      will-change: transform;
      animation: gdMarquee var(--gd-marquee-duration, 40s) linear infinite;
      animation-play-state: running;
    }

    @keyframes gdMarquee{
      from{transform:translateX(0)}
      to{transform:translateX(calc(-1 * var(--gd-marquee-distance, 0px)))}
    }

    .gd-project{
      flex:0 0 auto;
      /* Smaller on desktop/fullscreen; mobile gets an override below */
      width: clamp(170px, 13.5vw, 210px);
      border-radius:16px;
      overflow:hidden;
      background:var(--surface);
      border:1px solid rgba(0,0,0,.08);
      box-shadow:0 12px 34px rgba(0,0,0,.10);
      scroll-snap-align:start;
      scroll-snap-stop:always;
      /* Cards live on a single 3D plane (.gd-rail-inner). */
      transform: translateZ(0);
      transform-origin: center;
      backface-visibility: hidden;
      will-change: transform;
      transition:transform .22s ease, box-shadow .22s ease;
      cursor:pointer;
    }
    html.dark-mode .gd-project{border-color:rgba(255,255,255,.12);box-shadow:0 16px 50px rgba(0,0,0,.45)}
    @media (hover:hover) and (pointer:fine){
      .gd-project:hover{transform:translateY(-6px) translateZ(18px);box-shadow:0 24px 70px rgba(0,0,0,.20)}
      html.dark-mode .gd-project:hover{box-shadow:0 20px 70px rgba(0,0,0,.55)}
    }

    /* Reduce tilt on smaller screens so it doesn't feel cramped */
    @media (max-width: 720px){
      .gd-rail{perspective: 1100px}
      .gd-rail-plane{transform: translateY(48px) rotateX(3deg) rotateY(9deg) rotateZ(0.75deg)}
      .gd-project{width: min(260px, 70vw)}
    }
    @media (max-width: 420px){
      .gd-rail{perspective: 980px}
      .gd-rail-plane{transform: translateY(42px) rotateX(2.5deg) rotateY(7deg) rotateZ(0.5deg)}
    }
    /* Match modal ratio: 720x1080 (2:3) */
    .gd-thumb{aspect-ratio: 2 / 3;background:#e9eef6;display:block}
    .gd-thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .gd-thumb img{backface-visibility:hidden}
    /* Image-only cards (keep meta in DOM for modal data, but hide visually) */
    .gd-meta{display:none}

    /* Modal styles */
    .project-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 9999;
      display: none;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.25s ease;
    }
    .project-modal.is-open {
      display: flex;
      opacity: 1;
    }
    .modal-backdrop {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.75);
      cursor: pointer;
    }
    html.dark-mode .modal-backdrop {
      background: rgba(0, 0, 0, 0.88);
    }
    .modal-panel {
      position: relative;
      /* Target aspect: Letter landscape (11" x 8.5"). Keep it responsive to viewport. */
      width: min(1100px, 94vw, calc(92vh * 11 / 8.5));
      aspect-ratio: 11 / 8.5;
      height: auto;
      max-height: min(850px, 92vh);
      background: transparent;
      border-radius: 0;
      box-shadow: 0 28px 80px rgba(0, 0, 0, 0.35);
      overflow: hidden;
      transform: scale(0.92);
      transition: transform 0.25s ease;
      z-index: 1;
    }
    .project-modal.is-open .modal-panel {
      transform: scale(1);
    }
    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 40px;
      height: 40px;
      border: none;
      background: rgba(255, 255, 255, 0.92);
      color: #1a1a1a;
      font-size: 30px;
      line-height: 1;
      border-radius: 50%;
      cursor: pointer;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s ease, transform 0.15s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    html.dark-mode .modal-close {
      background: rgba(30, 30, 30, 0.95);
      color: #fff;
    }
    .modal-close:hover {
      transform: scale(1.08);
      background: rgba(255, 255, 255, 1);
    }
    html.dark-mode .modal-close:hover {
      background: rgba(40, 40, 40, 1);
    }
    .modal-prev,
    .modal-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 48px;
      height: 48px;
      border: none;
      background: rgba(255, 255, 255, 0.92);
      color: #1a1a1a;
      border-radius: 50%;
      cursor: pointer;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s ease, transform 0.15s ease, opacity 0.2s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      opacity: 0.9;
    }
    .modal-prev {
      left: 20px;
    }
    .modal-next {
      right: 20px;
    }
    html.dark-mode .modal-prev,
    html.dark-mode .modal-next {
      background: rgba(30, 30, 30, 0.95);
      color: #fff;
    }
    .modal-prev:hover,
    .modal-next:hover {
      opacity: 1;
      transform: translateY(-50%) scale(1.08);
      background: rgba(255, 255, 255, 1);
    }
    html.dark-mode .modal-prev:hover,
    html.dark-mode .modal-next:hover {
      background: rgba(40, 40, 40, 1);
    }
    .modal-prev:disabled,
    .modal-next:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
    .modal-content {
      width: 100%;
      height: 100%;
      padding: 0;
      overflow: hidden;
      display: block;
      position: relative;
      background: #000;
    }
    .modal-image {
      width: 100%;
      height: 100%;
      display: block;
      border-radius: 0;
      object-fit: contain;
    }

    /* Caption overlay (helps when multiple cards share the same placeholder image) */
    .modal-caption{
      position:absolute;
      left:0;
      right:0;
      bottom:0;
      padding:14px 16px 16px;
      color:#fff;
      background:linear-gradient(to top, rgba(0,0,0,.72) 0%, rgba(0,0,0,.38) 46%, rgba(0,0,0,0) 100%);
      pointer-events:none;
    }
    .modal-caption-row{display:flex;align-items:baseline;gap:12px}
    .modal-title{margin:0;font-size:15px;line-height:1.25;font-weight:800;letter-spacing:-.01em}
    .modal-count{margin-left:auto;font-size:12px;opacity:.9;white-space:nowrap}
    .modal-tag{margin:4px 0 0;font-size:12.5px;line-height:1.3;opacity:.92}
    .modal-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(128, 128, 128, 0.4);
      border: none;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.2s ease;
      padding: 0;
    }
    .modal-dot.active {
      background: var(--text);
      transform: scale(1.2);
    }
    .modal-dot:hover {
      background: rgba(128, 128, 128, 0.7);
    }

    @media (max-width: 560px){
      .gd-page{padding:28px 16px 56px}
      .modal-panel {
        max-width: 95vw;
        border-radius: 16px;
      }
      .modal-content {
        padding: 16px;
      }
      .modal-title {
        font-size: 24px;
      }
      .modal-close {
        width: 36px;
        height: 36px;
        font-size: 26px;
        top: 12px;
        right: 12px;
      }
      .modal-prev,
      .modal-next {
        width: 40px;
        height: 40px;
      }
      .modal-prev {
        left: 12px;
      }
      .modal-next {
        right: 12px;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="inner">
      <div class="brand">
        <img src="assets/images/logo.png" alt="EC logo" />
      </div>
      <nav class="nav" aria-label="Primary">
        <div class="nav-links" id="navLinks">
          <a href="#home">Home</a>
          <a href="https://www.dropbox.com/scl/fi/yoq5v4vw58mto6mhoipm0/pdf-portfolio-ec-lo.pdf?rlkey=ayc18qh89vhoaal84tukv37ky&st=0loh7lkv&dl=0" target="_blank" rel="noopener">PDF Portfolio</a>
          <a href="https://www.linkedin.com/in/eduardoadanc/" target="_blank" rel="noopener" class="linkedin-link" aria-label="LinkedIn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.475-2.236-1.986-2.236-1.081 0-1.722.722-2.002 1.413-.103.249-.129.597-.129.946v5.446h-3.554s.05-8.836 0-9.754h3.554v1.391c.43-.666 1.204-1.614 2.928-1.614 2.136 0 3.743 1.395 3.743 4.393v5.584zM5.337 9.433c-1.144 0-1.915-.758-1.915-1.709 0-.968.771-1.71 1.958-1.71 1.187 0 1.914.742 1.938 1.71 0 .951-.751 1.709-1.981 1.709zm1.946 11.019H3.39V9.698h3.893v10.754zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.225 0z"/>
            </svg>
          </a>
          <a class="cta secondary" href="index.html">Packaging Design</a>
          <a class="cta" href="#resume">Resume</a>
        </div>
        <div class="nav-actions">
          <button id="darkModeToggle" class="dark-mode-btn" type="button" aria-label="Toggle dark mode">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
          <button id="menuToggle" class="menu-btn" type="button" aria-label="Open menu" aria-controls="navLinks" aria-expanded="false">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
              <line x1="4" y1="7" x2="20" y2="7"></line>
              <line x1="4" y1="12" x2="20" y2="12"></line>
              <line x1="4" y1="17" x2="20" y2="17"></line>
            </svg>
          </button>
        </div>
      </nav>
    </div>
  </header>

  <main class="gd-page">
    <div class="gd-inner">
      <section class="gd-hero" id="home" aria-label="Graphic Design">
        <div class="gd-hero-media" aria-hidden="true">
          <video class="gd-hero-video" autoplay muted loop playsinline preload="metadata" poster="assets/images/blox_hero.jpg">
            <source src="assets/images/graphicsvideo.mp4" type="video/mp4" />
            <source src="assets/images/herovideo.mp4" type="video/mp4" />
          </video>
          <div class="gd-hero-scrim"></div>
        </div>

        <div class="gd-hero-topcopy" aria-hidden="false">
          <div class="gd-hero-topcopy-inner">
            <p class="gd-hero-lead">I’m Eduardo Chavez, a Los Angeles–based graphic designer specializing in packaging, brand systems, and digital experiences. I design with a product-first mindset—balancing creativity, clarity, and real-world execution.</p>
          </div>
        </div>

        <div class="gd-hero-content">
          <h1><span class="underline">Graphic Design Portfolio</span></h1>
          <div class="gd-actions">
            <a class="primary" href="#work">View work</a>
            <a class="ghost" href="index.html">Packaging portfolio</a>
          </div>
        </div>
      </section>

      <section class="gd-break" aria-label="Featured work divider">
        <div class="gd-break-marquee" aria-hidden="false">
          <div class="gd-break-row">
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
          </div>
          <div class="gd-break-row" aria-hidden="true">
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
            <span class="gd-break-item">FEATURED WORK</span><span class="gd-break-sep">//</span>
          </div>
        </div>
      </section>

      <section class="gd-work" id="work" aria-label="Featured work">
        <div class="gd-rail" id="gdRail" tabindex="0" aria-label="Graphic design projects">
          <div class="gd-rail-plane">
            <div class="gd-rail-track" role="list">
            <article class="gd-project" role="listitem">
              <div class="gd-thumb"><img src="assets/images/MoonCard.png" alt="Moon Coffee brand identity" /></div>
              <div class="gd-meta">
                <p class="title">Moon Coffee</p>
                <p class="tag">Brand Identity</p>
              </div>
            </article>
            <article class="gd-project" role="listitem">
              <div class="gd-thumb"><img src="assets/images/comingsoon.jpg" alt="Brand system exploration" /></div>
              <div class="gd-meta">
                <p class="title">Brand System</p>
                <p class="tag">Lockups · components</p>
              </div>
            </article>
            <article class="gd-project" role="listitem">
              <div class="gd-thumb"><img src="assets/images/comingsoon.jpg" alt="Poster design coming soon" /></div>
              <div class="gd-meta">
                <p class="title">Poster Series</p>
                <p class="tag">Print · composition</p>
              </div>
            </article>
            <article class="gd-project" role="listitem">
              <div class="gd-thumb"><img src="assets/images/comingsoon.jpg" alt="Key art coming soon" /></div>
              <div class="gd-meta">
                <p class="title">Key Art</p>
                <p class="tag">Hero visuals · campaigns</p>
              </div>
            </article>
            <article class="gd-project" role="listitem">
              <div class="gd-thumb"><img src="assets/images/comingsoon.jpg" alt="Social templates coming soon" /></div>
              <div class="gd-meta">
                <p class="title">Social Templates</p>
                <p class="tag">Systems · reusable layouts</p>
              </div>
            </article>
            <article class="gd-project" role="listitem">
              <div class="gd-thumb"><img src="assets/images/comingsoon.jpg" alt="Editorial layout coming soon" /></div>
              <div class="gd-meta">
                <p class="title">Editorial</p>
                <p class="tag">Typography · layout</p>
              </div>
            </article>
            </div>
          </div>
        </div>
      </section>

      <section id="resume" class="resume-section visible" aria-label="Resume">
        <div class="inner">
          <h2>Resume</h2>
          <div class="resume-grid">
            <div class="resume-column">
              <h3>Experience</h3>
              <div class="resume-item">
                <h4>PhatMojo, LLC. — Packaging Design Manager</h4>
                <p class="date">07.10.2018 - Present</p>
                <p>Led end-to-end packaging development for high-volume toy and consumer product lines. Managed mechanicals, dielines, and production-ready artwork across multiple SKUs. Coordinated with global vendors and factories on design approvals, production reviews, and quality control. Mentored junior designers and delivered packaging for brands including Blox Fruits, Dress to Impress, Poppy Playtime, and multiple Roblox IPs.</p>
              </div>
              <div class="resume-item">
                <h4>Kellogg and Huntley Galleries — Graphic Designer</h4>
                <p class="date">04.01.2015 - 04.05.2018</p>
                <p>Designed marketing collateral for university art gallery exhibitions. Created digital and print materials promoting events. Provided on-site support for gallery operations, visitor engagement, and artwork installation.</p>
              </div>
            </div>
            <div class="resume-column">
              <h3>Education</h3>
              <div class="resume-item">
                <p><strong>Cal Poly Pomona — BFA Graphic Design · Minor Art History</strong></p>
              </div>
              <h3>Skills</h3>
              <div class="resume-item">
                <p>Brand Identity, Packaging, Typography, Creative Direction, 3D Renders, Prototyping, Production, Vendor Management</p>
              </div>
              <h3>Download</h3>
              <a href="assets/resume.pdf" download class="btn-download">Download PDF Resume</a>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="site-footer">
      <div class="inner">
        <div class="footer-top">
          <div class="footer-brand">
            <img class="footer-logo footer-logo--light" src="assets/images/ecmonogram.png" alt="EC monogram" />
            <img class="footer-logo footer-logo--dark" src="assets/images/ecmonogramwhite.png" alt="EC monogram" />
            <div>
              <div class="footer-brand-title">Eduardo Chavez</div>
              <p class="footer-brand-sub">Visual + Packaging Designer</p>
            </div>
          </div>

          <p class="footer-blurb">
            I create brand identity, graphic systems, and UI/UX assets that keep your visuals consistent, clear, and polished across every touchpoint.
          </p>

          <div class="footer-right">
            <a class="footer-email" href="mailto:designer@eduardoachavez.com">designer@eduardoachavez.com</a>
            <nav class="footer-nav" aria-label="Footer">
              <a href="#home">Home</a>
              <a href="#work">Work</a>
              <a href="index.html">Packaging</a>
              <a href="https://www.linkedin.com/in/eduardoadanc/" target="_blank" rel="noopener">LinkedIn</a>
            </nav>
          </div>
        </div>
      </div>
  </footer>

  <!-- Custom cursor (enabled for fine pointers via JS) -->
  <div id="customCursor" class="custom-cursor" aria-hidden="true">
    <span class="cursor-icon cursor-plus" aria-hidden="true"></span>
    <span class="cursor-icon cursor-circle" aria-hidden="true"></span>
    <span class="cursor-icon cursor-star" aria-hidden="true"></span>
  </div>

  <!-- Project Modal (image-only) -->
  <div id="projectModal" class="project-modal" role="dialog" aria-modal="true" aria-label="Project image">
    <div class="modal-backdrop"></div>
    <div class="modal-panel">
      <button class="modal-close" aria-label="Close modal">&times;</button>
      <button class="modal-prev" aria-label="Previous project">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <button class="modal-next" aria-label="Next project">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
      <div class="modal-content">
        <img class="modal-image" alt="" />
        <div class="modal-caption" aria-live="polite">
          <div class="modal-caption-row">
            <h3 class="modal-title"></h3>
            <span class="modal-count"></span>
          </div>
          <p class="modal-tag"></p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Gate access: require existing session authorization unless ?skip=1 is present.
    (function(){
      const params = new URLSearchParams(window.location.search);
      const skip = params.get('skip') === '1';

      const AUTH_PACKAGING_KEY = 'eacAuthorizedPackaging';
      const AUTH_GRAPHIC_KEY = 'eacAuthorizedGraphic';

      const authorized = sessionStorage.getItem(AUTH_GRAPHIC_KEY) === '1';
      // If skip flag present, also set session flags so other pages don't bounce back.
      if (skip) {
        try { sessionStorage.setItem(AUTH_PACKAGING_KEY,'1'); } catch (e) {}
        try { sessionStorage.setItem(AUTH_GRAPHIC_KEY,'1'); } catch (e) {}
      }
      if(!skip && !authorized){
        window.location.replace('index.html');
        return;
      }

      // Dark mode toggle (standalone, avoids loading full script.js)
      const darkModeToggle = document.getElementById('darkModeToggle');
      const htmlElement = document.documentElement;
      const savedDarkMode = localStorage.getItem('darkMode');
      const prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (savedDarkMode === 'true' || (!savedDarkMode && prefersDarkMode)) {
        htmlElement.classList.add('dark-mode');
      }
      if (darkModeToggle) {
        darkModeToggle.addEventListener('click', () => {
          htmlElement.classList.toggle('dark-mode');
          localStorage.setItem('darkMode', htmlElement.classList.contains('dark-mode'));
        });
      }

      // Footer text fallback (handles any cached/old markup)
      (() => {
        // If a full structured footer is present, do not rewrite it.
        if (document.querySelector('.site-footer')) return;
        const desired = `© ${new Date().getFullYear()} Eduardo Chavez`;
        const nodes = document.querySelectorAll('footer .footer-inner');
        nodes.forEach((node) => {
          const t = (node.textContent || '').trim();
          if (!t) return;
          if (t === desired) return;
          if (/^©\s*\d{4}\s*Eduardo\s*Chavez/i.test(t) || /all\s*rights\s*reserved/i.test(t)) {
            node.textContent = desired;
          }
        });
      })();

      // Footer year
      (() => {
        const y = document.getElementById('footerYear');
        if (y) y.textContent = String(new Date().getFullYear());
      })();

      // Hero underline animation (matches packaging page feel)
      (() => {
        const hero = document.querySelector('.gd-hero');
        if (!hero) return;
        // Wait one frame so layout is stable before animating.
        window.requestAnimationFrame(() => hero.classList.add('loaded'));
      })();

      // Mobile nav (hamburger)
      (() => {
        const nav = document.querySelector('.header .nav');
        const toggle = document.getElementById('menuToggle');
        const links = nav?.querySelector?.('.nav-links');
        if (!nav || !toggle || !links) return;

        const isTouchLike =
          window.matchMedia?.('(hover: none)').matches ||
          window.matchMedia?.('(pointer: coarse)').matches;
        let starTimer = 0;
        const flashStar = () => {
          if (!isTouchLike) return;
          toggle.classList.add('is-star');
          if (starTimer) window.clearTimeout(starTimer);
          starTimer = window.setTimeout(() => {
            toggle.classList.remove('is-star');
            starTimer = 0;
          }, 2000);
        };

        const setExpanded = (expanded) => {
          toggle.setAttribute('aria-expanded', expanded ? 'true' : 'false');
          toggle.setAttribute('aria-label', expanded ? 'Close menu' : 'Open menu');
        };
        const closeMenu = () => {
          if (!nav.classList.contains('is-open')) return;
          nav.classList.remove('is-open');
          setExpanded(false);
        };
        const openMenu = () => {
          if (nav.classList.contains('is-open')) return;
          nav.classList.add('is-open');
          setExpanded(true);
        };

        toggle.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const willOpen = !nav.classList.contains('is-open');
          if (willOpen) openMenu();
          else closeMenu();

          flashStar();

          // Prevent lingering focus styles (mobile browsers can keep focus/hover “stuck”)
          toggle.blur();
        });

        // Custom cursor (same behavior as packaging; enabled on fine pointers only)
        (() => {
          const supportsFinePointer =
            window.matchMedia?.('(pointer: fine)').matches &&
            window.matchMedia?.('(hover: hover)').matches;
          if (!supportsFinePointer) return;

          const cursorEl = document.getElementById('customCursor');
          if (!cursorEl) return;

          const root = document.documentElement;
          let enabled = false;
          const enable = () => {
            if (enabled) return;
            enabled = true;
            root.classList.add('cursor-enabled');
          };

          let x = 0;
          let y = 0;
          let raf = 0;
          let visible = false;

          const render = () => {
            raf = 0;
            cursorEl.style.left = x + 'px';
            cursorEl.style.top = y + 'px';
          };

          const setPos = (e) => {
            x = e.clientX;
            y = e.clientY;
            if (!raf) raf = window.requestAnimationFrame(render);
          };

          const setVisible = (on) => {
            visible = on;
            cursorEl.classList.toggle('is-visible', on);
          };

          window.addEventListener('pointermove', (e) => {
            if (e.pointerType && e.pointerType !== 'mouse') return;
            enable();
            setPos(e);
            if (!visible) setVisible(true);
          }, { passive: true });

          window.addEventListener('mousemove', (e) => {
            enable();
            setPos(e);
            if (!visible) setVisible(true);
          }, { passive: true });

          window.addEventListener('blur', () => {
            setVisible(false);
          });
          window.addEventListener('mouseleave', () => {
            setVisible(false);
          });
          document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
              setVisible(false);
            }
          });
        })();

        // Custom cursor that replaces the native cursor over images (desktop / fine pointers only)
        (() => {
          const supportsFinePointer =
            window.matchMedia?.('(pointer: fine)').matches &&
            window.matchMedia?.('(hover: hover)').matches;
          if (!supportsFinePointer) return;

          const cursorEl = document.getElementById('customCursor');
          if (!cursorEl) return;

          const root = document.documentElement;
          let enabled = false;
          const enable = () => {
            if (enabled) return;
            enabled = true;
            root.classList.add('cursor-enabled');
          };

          // Animate the cursor over thumbnail areas (and the modal image).
          // Using the thumb container avoids flicker when moving within the image.
          const imageSelector = '.gd-thumb, #projectModal .modal-image';

          let x = 0;
          let y = 0;
          let raf = 0;
          let visible = false;

          const render = () => {
            raf = 0;
            cursorEl.style.left = x + 'px';
            cursorEl.style.top = y + 'px';
          };

          const setPos = (e) => {
            x = e.clientX;
            y = e.clientY;
            if (!raf) raf = window.requestAnimationFrame(render);
          };

          const setVisible = (on) => {
            visible = on;
            cursorEl.classList.toggle('is-visible', on);
          };

          const setImageHover = (on) => {
            cursorEl.classList.toggle('is-image', on);
          };

          // Track mouse position
          window.addEventListener('pointermove', (e) => {
            if (e.pointerType && e.pointerType !== 'mouse') return;
            enable();
            setPos(e);
            if (!visible) setVisible(true);
          }, { passive: true });
          window.addEventListener('mousemove', (e) => {
            enable();
            setPos(e);
            if (!visible) setVisible(true);
          }, { passive: true });

          // Only change cursor style when hovering supported images
          document.addEventListener('pointerover', (e) => {
            if (e.pointerType && e.pointerType !== 'mouse') return;
            const img = e.target?.closest?.(imageSelector);
            if (!img) return;
            enable();
            setPos(e);
            setImageHover(true);
          });

          document.addEventListener('pointerout', (e) => {
            const fromImg = e.target?.closest?.(imageSelector);
            if (!fromImg) return;
            const to = e.relatedTarget;
            if (to && to.closest && to.closest(imageSelector)) return;
            setImageHover(false);
          });

          // Safety: hide cursor when leaving the window/tab
          window.addEventListener('blur', () => {
            setVisible(false);
            setImageHover(false);
          });
          window.addEventListener('mouseleave', () => {
            setVisible(false);
            setImageHover(false);
          });
          document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
              setVisible(false);
              setImageHover(false);
            }
          });
        })();

        // Grayscale video parallax (Graphic Design hero)
        (() => {
          const hero = document.querySelector('.gd-hero');
          const media = hero?.querySelector?.('.gd-hero-media');
          if (!hero || !media) return;

          const reduce = window.matchMedia?.('(prefers-reduced-motion: reduce)')?.matches;
          if (reduce) return;

          let raf = 0;

          const update = () => {
            raf = 0;
            const rect = hero.getBoundingClientRect();
            const vh = window.innerHeight || 0;

            // Only update when near the viewport (avoid needless work).
            if (rect.bottom < -200 || rect.top > vh + 200) return;

            // Parallax offset: move media slower than scroll.
            // When hero is at top (rect.top ~ 0), offset ~ 0.
            const speed = 0.18;
            const offset = Math.round(rect.top * -speed);
            hero.style.setProperty('--gd-hero-parallax', offset + 'px');
          };

          const request = () => {
            if (!raf) raf = window.requestAnimationFrame(update);
          };

          // Initial + on scroll/resize
          update();
          window.addEventListener('scroll', request, { passive: true });
          window.addEventListener('resize', request, { passive: true });
          document.addEventListener('visibilitychange', () => {
            if (!document.hidden) request();
          });
        })();

        // Featured Work divider marquee speed (match work rail px/sec feel)
        (() => {
          const marquee = document.querySelector('.gd-break-marquee');
          if (!marquee) return;

          const prefersReducedMotion = window.matchMedia?.('(prefers-reduced-motion: reduce)')?.matches;
          if (prefersReducedMotion) return;

          // Match the work rail speed constant.
          const SPEED_PX_PER_SEC = 26;
          let raf = 0;

          const update = () => {
            raf = 0;
            const total = marquee.scrollWidth || 0;
            // We translate -50% for a seamless loop (two identical rows), so distance is half.
            const distance = Math.max(1, Math.round(total / 2));
            const seconds = Math.max(10, distance / Math.max(8, SPEED_PX_PER_SEC));
            marquee.style.setProperty('--gd-break-duration', seconds.toFixed(2) + 's');
          };

          const request = () => {
            if (!raf) raf = window.requestAnimationFrame(update);
          };

          // Initial + refresh after fonts load and on resize.
          update();
          window.addEventListener('resize', request, { passive: true });
          if (document.fonts?.ready) {
            document.fonts.ready.then(request).catch(() => {});
          }
          window.addEventListener('load', request, { once: true, passive: true });
        })();
        document.addEventListener('click', (e) => {
          if (!nav.classList.contains('is-open')) return;
          if (nav.contains(e.target)) return;
          closeMenu();
        });
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') closeMenu();
        });
        links.addEventListener('click', (e) => {
          const a = e.target?.closest?.('a');
          if (!a) return;
          closeMenu();
        });
        window.addEventListener('resize', () => {
          if (window.innerWidth > 768) closeMenu();
        }, { passive: true });
      })();

      // Project modal (image-only) with navigation
      (() => {
        const modal = document.getElementById('projectModal');
        const modalImg = modal?.querySelector('.modal-image');
        const modalTitle = modal?.querySelector('.modal-title');
        const modalTag = modal?.querySelector('.modal-tag');
        const modalCount = modal?.querySelector('.modal-count');
        const modalClose = modal?.querySelector('.modal-close');
        const modalPrev = modal?.querySelector('.modal-prev');
        const modalNext = modal?.querySelector('.modal-next');
        const backdrop = modal?.querySelector('.modal-backdrop');
        const rail = document.getElementById('gdRail');
        
        if (!modal || !modalImg || !modalClose || !rail) return;

        let isModalOpen = false;
        let currentIndex = 0;
        let currentImageIndex = 0;
        let projects = [];

        const toAbs = (path) => {
          try {
            return new URL(path, window.location.href).href;
          } catch {
            return path;
          }
        };

        const getOriginalCards = () =>
          Array.from(rail.querySelectorAll('.gd-project')).filter(
            (c) => c.getAttribute('data-gd-clone') !== '1'
          );

        const getAllCards = () => Array.from(rail.querySelectorAll('.gd-project'));

        // Gather all project data from the rail (only original cards, not duplicates)
        const initProjects = () => {
          const cards = getOriginalCards();
          projects = cards.map(card => {
            const title = (card.querySelector('.title')?.textContent || 'Untitled').trim();
            const tag = (card.querySelector('.tag')?.textContent || '').trim();
            const thumb = card.querySelector('.gd-thumb img')?.src || '';

            // Default: single image per project (uses the card thumbnail)
            let images = [thumb].filter(Boolean);

            // Moon Coffee: open a 4-image gallery
            if (/^moon\s*coffee$/i.test(title)) {
              images = [
                toAbs('assets/images/moon_1.jpg'),
                toAbs('assets/images/moon_2.jpg'),
                toAbs('assets/images/moon_3.jpg'),
                toAbs('assets/images/moon_4.jpg')
              ];
            }

            return { images, title, tag };
          });
        };

        const showProject = (index, imageIndex = 0) => {
          if (projects.length === 0) return;
          // Wrap for circular nav
          index = ((index % projects.length) + projects.length) % projects.length;
          currentIndex = index;
          const project = projects[index];

          const imgs = Array.isArray(project.images) ? project.images : [];
          const count = Math.max(1, imgs.length);
          imageIndex = ((imageIndex % count) + count) % count;
          currentImageIndex = imageIndex;
          const src = imgs[imageIndex] || '';
          
          modalImg.src = src;
          modalImg.alt = project.title;

          if (modalTitle) modalTitle.textContent = project.title || '';
          if (modalTag) modalTag.textContent = project.tag || '';
          if (modalCount) {
            const projPart = (index + 1) + ' / ' + projects.length;
            const imgPart = count > 1 ? (' • ' + (imageIndex + 1) + ' / ' + count) : '';
            modalCount.textContent = projPart + imgPart;
          }
          
          // Enable nav if there is more than one image across the whole sequence.
          const canNav = projects.length > 1 || count > 1;
          if (modalPrev) modalPrev.disabled = !canNav;
          if (modalNext) modalNext.disabled = !canNav;
        };

        const openModal = (index) => {
          currentIndex = index;
          showProject(index, 0);
          modal.classList.add('is-open');
          isModalOpen = true;
          document.body.style.overflow = 'hidden';
          
          // Pause auto-scroll when modal is open
          if (window.gdRailAutoScrollPause) window.gdRailAutoScrollPause();
        };

        const closeModal = () => {
          if (!isModalOpen) return;
          modal.classList.remove('is-open');
          isModalOpen = false;
          document.body.style.overflow = '';
          
          // Resume auto-scroll when modal closes
          if (window.gdRailAutoScrollResume) window.gdRailAutoScrollResume(800);
        };

        const prevProject = () => {
          if (projects.length === 0) return;
          const project = projects[currentIndex];
          const imgs = Array.isArray(project?.images) ? project.images : [];
          const count = Math.max(1, imgs.length);

          if (count > 1 && currentImageIndex > 0) {
            showProject(currentIndex, currentImageIndex - 1);
            return;
          }

          const nextIndex = ((currentIndex - 1) % projects.length + projects.length) % projects.length;
          const nextProject = projects[nextIndex];
          const nextImgs = Array.isArray(nextProject?.images) ? nextProject.images : [];
          const nextCount = Math.max(1, nextImgs.length);
          showProject(nextIndex, Math.max(0, nextCount - 1));
        };

        const nextProject = () => {
          if (projects.length === 0) return;
          const project = projects[currentIndex];
          const imgs = Array.isArray(project?.images) ? project.images : [];
          const count = Math.max(1, imgs.length);

          if (count > 1 && currentImageIndex < count - 1) {
            showProject(currentIndex, currentImageIndex + 1);
            return;
          }

          const nextIndex = (currentIndex + 1) % projects.length;
          showProject(nextIndex, 0);
        };

        // Open modal on tap/click (supports touch + mouse). Ignore drags.
        const MOVE_THRESHOLD = 8;
        let down = null;
        let moved = false;

        rail.addEventListener('pointerdown', (e) => {
          // Only primary button for mouse; allow touch/pen.
          if (e.pointerType === 'mouse' && e.button !== 0) return;

          // Pause auto-scroll so the card doesn't drift under the finger/cursor.
          if (window.gdRailAutoScrollPause) window.gdRailAutoScrollPause();

          down = { id: e.pointerId, x: e.clientX, y: e.clientY };
          moved = false;
        }, { passive: true });

        rail.addEventListener('pointermove', (e) => {
          if (!down || e.pointerId !== down.id) return;
          const dx = Math.abs(e.clientX - down.x);
          const dy = Math.abs(e.clientY - down.y);
          if (dx + dy > MOVE_THRESHOLD) moved = true;
        }, { passive: true });

        rail.addEventListener('pointerup', (e) => {
          if (!down || e.pointerId !== down.id) return;
          const wasMoved = moved;
          down = null;
          moved = false;
          if (wasMoved) {
            if (window.gdRailAutoScrollResume) window.gdRailAutoScrollResume(650);
            return;
          }

          const card = e.target.closest('.gd-project');
          if (!card) return;

          if (projects.length === 0) initProjects();

          const originalCards = getOriginalCards();
          const allCards = getAllCards();
          const originalCount = originalCards.length;
          if (originalCount === 0) return;

          let index = -1;

          // If an original card was clicked, use its index among originals.
          if (card.getAttribute('data-gd-clone') !== '1') {
            index = originalCards.indexOf(card);
          } else {
            // If a clone was clicked, map back to the original sequence.
            const allIndex = allCards.indexOf(card);
            if (allIndex >= 0) index = allIndex % originalCount;
          }

          if (index < 0 || index >= projects.length) return;

          // Prevent the synthesized click that may follow on some browsers.
          e.preventDefault();
          openModal(index);
        }, { passive: false });

        // Navigation button handlers
        if (modalPrev) modalPrev.addEventListener('click', prevProject);
        if (modalNext) modalNext.addEventListener('click', nextProject);

        // Close modal handlers
        backdrop.addEventListener('click', closeModal);
        modalClose.addEventListener('click', closeModal);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
          if (!isModalOpen) return;

          if (e.key === 'Escape') {
            closeModal();
          } else if (e.key === 'ArrowLeft') {
            e.preventDefault();
            prevProject();
          } else if (e.key === 'ArrowRight') {
            e.preventDefault();
            nextProject();
          }
        });
      })();

      // Horizontal rail: always-on marquee (no manual left/right scrolling)
      (() => {
        const rail = document.getElementById('gdRail');
        if (!rail) return;

        const track = rail.querySelector('.gd-rail-track');
        if (!track) return;

        const prefersReducedMotion = window.matchMedia?.('(prefers-reduced-motion: reduce)')?.matches;
        const SPEED_PX_PER_SEC = prefersReducedMotion ? 14 : 26;

        let resumeTimer = 0;

        const setPlayState = (state) => {
          track.style.animationPlayState = state;
        };

        const pauseAuto = () => {
          if (resumeTimer) window.clearTimeout(resumeTimer);
          resumeTimer = 0;
          setPlayState('paused');
        };

        const resumeAutoSoon = (delayMs = 650) => {
          if (resumeTimer) window.clearTimeout(resumeTimer);
          resumeTimer = window.setTimeout(() => {
            setPlayState('running');
            resumeTimer = 0;
          }, delayMs);
        };

        // Expose pause/resume for modal integration
        window.gdRailAutoScrollPause = pauseAuto;
        window.gdRailAutoScrollResume = resumeAutoSoon;

        const clearClones = () => {
          track.querySelectorAll('[data-gd-clone="1"]').forEach((n) => n.remove());
        };

        const buildMarquee = () => {
          clearClones();

          // Reset loop marker until we actually add clones.
          rail.dataset.looped = '0';

          // Measure original width
          const originalWidth = track.scrollWidth;
          if (!originalWidth || track.children.length === 0) return;

          // Ensure we have enough content to animate on very wide screens.
          // If the original set fits fully within the viewport, it can look "stuck".
          // We clone the full set enough times to exceed ~2x the rail width.
          const railWidth = rail.clientWidth || window.innerWidth || 0;
          const targetTotal = Math.max(originalWidth * 2, railWidth * 2);
          const copies = Math.min(10, Math.max(2, Math.ceil(targetTotal / originalWidth)));

          const kids = Array.from(track.children);
          for (let c = 1; c < copies; c += 1) {
            kids.forEach((node) => {
              const clone = node.cloneNode(true);
              clone.setAttribute('data-gd-clone', '1');
              clone.setAttribute('aria-hidden', 'true');
              track.appendChild(clone);
            });
          }

          if (copies > 1) rail.dataset.looped = '1';

          // Set distance + duration based on px/sec.
          track.style.setProperty('--gd-marquee-distance', originalWidth + 'px');
          const seconds = Math.max(8, originalWidth / Math.max(8, SPEED_PX_PER_SEC));
          track.style.setProperty('--gd-marquee-duration', seconds.toFixed(2) + 's');

          // Ensure running
          setPlayState('running');
        };

        // Prevent horizontal wheel/trackpad scrolling while allowing vertical page scroll.
        rail.addEventListener('wheel', (e) => {
          const absX = Math.abs(e.deltaX || 0);
          const absY = Math.abs(e.deltaY || 0);
          if (e.shiftKey || absX > absY) e.preventDefault();
        }, { passive: false });

        // Build after layout settles.
        const init = () => {
          buildMarquee();
        };

        // Retry for a moment (images/fonts can affect widths)
        let attempts = 0;
        const tickInit = () => {
          attempts += 1;
          init();
          // Keep trying longer on slow networks; stop after ~10s.
          if (attempts < 600) {
            window.requestAnimationFrame(tickInit);
          }
        };

        // Re-init when images finish loading/decoding (common reason it "starts" only after resize).
        const hookImageLoads = () => {
          const imgs = Array.from(track.querySelectorAll('img'));
          imgs.forEach((img) => {
            if (img.complete) return;
            img.addEventListener('load', () => {
              attempts = 0;
              tickInit();
            }, { once: true, passive: true });
            img.addEventListener('error', () => {
              attempts = 0;
              tickInit();
            }, { once: true, passive: true });
          });

          // If supported, decoding is a stronger signal than load timing.
          imgs.forEach((img) => {
            if (typeof img.decode !== 'function') return;
            img.decode().then(() => {
              attempts = 0;
              tickInit();
            }).catch(() => {});
          });
        };

        // Fonts can change widths too.
        const hookFonts = () => {
          const fonts = document.fonts;
          if (!fonts || !fonts.ready) return;
          fonts.ready.then(() => {
            attempts = 0;
            tickInit();
          }).catch(() => {});
        };

        // Build now, and re-check on common lifecycle events.
        window.requestAnimationFrame(tickInit);
        window.addEventListener('load', () => {
          hookImageLoads();
          hookFonts();
          attempts = 0;
          tickInit();
        }, { once: true });

        // If the tab was backgrounded during load, kick it once visible again.
        document.addEventListener('visibilitychange', () => {
          if (document.hidden) return;
          attempts = 0;
          tickInit();
        });

        window.addEventListener('resize', () => {
          attempts = 0;
          tickInit();
        }, { passive: true });
      })();
    })();
  </script>
</body>
</html>
